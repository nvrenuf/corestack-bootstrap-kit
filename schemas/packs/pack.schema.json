{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://schemas.corestack.dev/packs/pack.schema.json",
  "title": "Corestack Pack Contract",
  "type": "object",
  "additionalProperties": true,
  "required": [
    "id",
    "name",
    "version",
    "description",
    "required_corestack_version",
    "ports",
    "services"
  ],
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^[a-z0-9][a-z0-9-]{0,62}$"
    },
    "name": {
      "type": "string",
      "minLength": 1
    },
    "version": {
      "type": "string",
      "minLength": 1
    },
    "description": {
      "type": "string",
      "minLength": 1
    },
    "required_corestack_version": {
      "type": "string",
      "minLength": 1
    },
    "ports": {
      "type": "object",
      "additionalProperties": true,
      "required": [
        "offset_required",
        "exposed"
      ],
      "properties": {
        "offset_required": {
          "type": "boolean",
          "const": true
        },
        "exposed": {
          "type": "array",
          "items": {
            "oneOf": [
              {
                "type": "integer",
                "minimum": 1,
                "maximum": 65535
              },
              {
                "type": "string",
                "minLength": 1
              }
            ]
          }
        }
      }
    },
    "services": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "string",
        "minLength": 1
      }
    }
  }
}
